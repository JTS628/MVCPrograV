<!DOCTYPE HTML>
@* @model List<PrograV.Models.VisitWithOwnerViewModel> *@
<html>
<head>
	<title>Two Column 2 - Halcyonic by HTML5 UP</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="/HTML5UP/assets/css/main.css" />
	<style>
		table.full-width {
			width: 100%;
			border-collapse: collapse;
		}

			table.full-width th, table.full-width td {
				padding: 10px;
				border: 1px solid #ddd;
				text-align: left;
			}

		.table-wrapper {
			overflow-x: auto;
		}
	</style>
</head>
<body class="subpage">
	<div id="page-wrapper">

		<!-- Header -->
		<section id="header">
			<div class="container">
				<div class="row">
					<div class="col-12">

						<!-- Logo -->
						<h1><a href="@Url.Action("Index","Security")" id="logo">Seguridad</a></h1>

						<!-- Nav -->
						<nav id="nav">
							
							<a  href="@Url.Action("Index","Security")">Homepage</a>
							
							<a asp-action="OfficerCreateVisit" asp-controller="Security">Crear Visitas</a>
							@*<a href="twocolumn1.html">Two Column #1</a>
							<a href="twocolumn2.html">Two Column #2</a> *@
							@* <div style="text-align: end"> *@
							<a asp-action="Logout" asp-controller="Login">LogOut</a>
							@* </div> *@
						</nav>

					</div>
				</div>
			</div>
		</section>

		<!-- Content -->
		<section id="content">
			<div class="container">
				<div class="row">
					<div class="col-3 col-12-medium">

						<!-- Sidebar -->
						<section>
							<header>
								<h2>Proyecto Habitacional</h2>
							</header>
							
							<div class="form-group">
								<label for="txtcondo" class="control-label">Condominium: </label>
								<select id="condoFilter" name="txtcondo" class="form-control" typeof="text">
									<option value="">Seleccione un condominio</option>
									@if (ViewBag.condo != null)
									{
										foreach (var condo in ViewBag.condo)
										{
											<option value="@condo.Name" data-count="@condo.Count">@condo.Name</option>

											@* <p>Condo: @condo.Name, Count: @condo.Count</p>
											 <option value="@condo.Name">@condo.Name</option> *@
										}
									}
								</select>
							</div>
							<ul class="link-list">
									@*<li><a asp-action="OfficerCreateVisit" asp-controller="Security">Crear Visitas</a></li>
								 <li><a href="#">Ligula non varius</a></li>
								<li><a href="#">Nec sociis natoque</a></li>
								<li><a href="#">Penatibus et magnis</a></li>
								<li><a href="#">Dis parturient montes</a></li>
								<li><a href="#">Nascetur ridiculus</a></li> *@
							</ul>
						</section>
						<section>
							<header>
								<h2>Acciones del Oficial</h2>
							</header>
							<p>
								Esta opcion permite docuementar el ingreso de visitantes.
							</p>
							<ul class="link-list">
								<li><a asp-action="OfficerCreateVisit" asp-controller="Security">Crear Visitas</a></li>
								<li><a asp-action="CheckQuickpass" asp-controller="Security">Verificar QuickPass</a></li>
								@*<li><a href="#">Dis parturient montes</a></li>
								<li><a href="#">Nascetur ridiculus</a></li> *@
							</ul>
						</section>

					</div>
					<div class="col-9 col-12-medium imp-medium">

						<!-- Main Content -->
						<section>
							<h3>Barra de busqueda</h3>
							<input type="text" id="searchInput" placeholder="Filto de busqueda tabla..." style="margin-bottom: 10px; padding: 8px; width: 100%; border: 1px solid #ccc; border-radius: 4px;">
							
							<header>
								<br/>
								<h2>Lista de Visitas</h2>
							</header>
							<div class="table-wrapper">
								<table class="full-width">
									<thead>
										<tr>
											<th>Creada por</th>
											<th>Visitante</th>
											<th>Cédula</th>
											<th>Marca Vehículo</th>
											<th>Modelo</th>
											<th>Color</th>
											<th>Placa</th>
											<th>Fecha de Visita</th>
											<th>Acciones</th>
										</tr>
									</thead>
									<tbody>
										@if (Model != null && Model.Count > 0)
										{
											foreach (var item in Model)
											{
												<tr>
													<td>@(item.Owner?.name ?? "Oficial en turno")</td> <!-- Owner name -->
													<td>@item.Visit.nombre</td>
													<td>@item.Visit.cedula</td>
													<td>@item.Visit.marcavehiculo</td>
													<td>@item.Visit.modelo</td>
													<td>@item.Visit.color</td>
													<td>@item.Visit.placa</td>
													<td>@item.Visit.fecha.ToShortDateString()</td>
													<td hidden>@item.CondoName</td>
													<td>
														<a asp-action="OfficerDeleteVisit"
														   asp-controller="Security"
														   asp-route-id="@item.Visit.id"
														   class="button primary">Eliminar</a>
													</td>
												</tr>
											}
										}
										else
										{
											<tr>
												<td colspan="9" style="text-align:center; color:red;">No se han encontrado visitas.</td>
											</tr>
										}
									</tbody>

									@* <tbody>
										@if (ViewBag.VisitList != null && ViewBag.VisitList.Count > 0)
										{
											foreach (var visit in ViewBag.VisitList)
											{
												<tr>

													<td>@visit.nombre</td>
													<td>@visit.cedula</td>
													<td>@visit.marcavehiculo</td>
													<td>@visit.modelo</td>
													<td>@visit.color</td>
													<td>@visit.placa</td>
													<td>@visit.fecha</td>
													<td>
														
														<a asp-action="OfficerDeleteVisit" asp-controller="security" asp-route-id="@visit.id" class="button primary ">Eliminar Visita</a>


													</td>
												</tr>
											}
										}
										else
										{
											<tr>
												<td colspan="7" style="text-align:center; color:red;">No owners found.</td>
											</tr>
										}
									</tbody> *@
								</table>
								

							</div>
						</section>

					</div>
				</div>
			</div>
		</section>

		<!-- Footer -->
		<section id="footer">
			<div class="container">
				<div class="row">
					<div class="col-8 col-12-medium">

						<!-- Links -->
						<section>
							<h2>Links to Important Stuff</h2>
							<div>
								<div class="row">
									<div class="col-3 col-12-small">
										<ul class="link-list last-child">
											<li><a href="#">Neque amet dapibus</a></li>
											<li><a href="#">Sed mattis quis rutrum</a></li>
											<li><a href="#">Accumsan suspendisse</a></li>
											<li><a href="#">Eu varius vitae magna</a></li>
										</ul>
									</div>
									<div class="col-3 col-12-small">
										<ul class="link-list last-child">
											<li><a href="#">Neque amet dapibus</a></li>
											<li><a href="#">Sed mattis quis rutrum</a></li>
											<li><a href="#">Accumsan suspendisse</a></li>
											<li><a href="#">Eu varius vitae magna</a></li>
										</ul>
									</div>
									<div class="col-3 col-12-small">
										<ul class="link-list last-child">
											<li><a href="#">Neque amet dapibus</a></li>
											<li><a href="#">Sed mattis quis rutrum</a></li>
											<li><a href="#">Accumsan suspendisse</a></li>
											<li><a href="#">Eu varius vitae magna</a></li>
										</ul>
									</div>
									<div class="col-3 col-12-small">
										<ul class="link-list last-child">
											<li><a href="#">Neque amet dapibus</a></li>
											<li><a href="#">Sed mattis quis rutrum</a></li>
											<li><a href="#">Accumsan suspendisse</a></li>
											<li><a href="#">Eu varius vitae magna</a></li>
										</ul>
									</div>
								</div>
							</div>
						</section>

					</div>
					<div class="col-4 col-12-medium imp-medium">

						<!-- Blurb -->
						<section>
							<h2>An Informative Text Blurb</h2>
							<p>
								Duis neque nisi, dapibus sed mattis quis, rutrum accumsan sed. Suspendisse eu
								varius nibh. Suspendisse vitae magna eget odio amet mollis. Duis neque nisi,
								dapibus sed mattis quis, sed rutrum accumsan sed. Suspendisse eu varius nibh
								lorem ipsum amet dolor sit amet lorem ipsum consequat gravida justo mollis.
							</p>
						</section>

					</div>
				</div>
			</div>
		</section>

		<!-- Copyright -->
		<div id="copyright">
			&copy; Untitled. All rights reserved. | Design: <a href="http://html5up.net">HTML5 UP</a>
		</div>

	</div>

	<!-- Scripts -->
	<script src="/HTML5UP/assets/js/jquery.min.js"></script>
	<script src="/HTML5UP/assets/js/browser.min.js"></script>
	<script src="/HTML5UP/assets/js/breakpoints.min.js"></script>
	<script src="/HTML5UP/assets/js/util.js"></script>
	<script src="/HTML5UP/assets/js/main.js"></script>
	<script>
		// General search functionality for filtering by text
		document.getElementById("searchInput").addEventListener("keyup", function () {
			filterTable();
		});

		// Condo dropdown filter functionality
		document.getElementById("condoFilter").addEventListener("change", function () {
			filterTable();
		});

		// Function to filter table rows based on both search and condo selection
		function filterTable() {
			const searchValue = document.getElementById("searchInput").value.toLowerCase();
			const selectedCondo = document.getElementById("condoFilter").value.toLowerCase();
			const rows = document.querySelectorAll(".full-width tbody tr");

			rows.forEach(row => {
				const cells = Array.from(row.getElementsByTagName("td"));
				const matchTextSearch = cells.some(cell => cell.textContent.toLowerCase().includes(searchValue));

				// Assuming CondoName is in the 9th column (index 8)
				const condoCell = row.cells[8]; // Adjust index if necessary
				const condoName = condoCell ? condoCell.textContent.toLowerCase() : "";
				const matchCondoSearch = !selectedCondo || condoName.includes(selectedCondo);

				// Display the row if both conditions match
				if (matchTextSearch && matchCondoSearch) {
					row.style.display = "";
				} else {
					row.style.display = "none";
				}
			});
		}
	</script>

	@* <script>
		document.getElementById("searchInput").addEventListener("keyup", function () {
			const searchValue = this.value.toLowerCase();
			const rows = document.querySelectorAll(".full-width tbody tr");

			rows.forEach(row => {
				const cells = Array.from(row.getElementsByTagName("td"));
				const match = cells.some(cell => cell.textContent.toLowerCase().includes(searchValue));
				row.style.display = match ? "" : "none";
			});
		});
			document.getElementById("condoFilter").addEventListener("change", function () {
			const selectedCondo = this.value.toLowerCase();
			const rows = document.querySelectorAll(".full-width tbody tr");

			rows.forEach(row => {
				const condoCell = row.cells[8]; // The <td hidden> with CondoName
				const condoName = condoCell?.textContent?.toLowerCase() || "";
				row.style.display = !selectedCondo || condoName.includes(selectedCondo) ? "" : "none";
			});
		});
	</script> *@

</body>


</html>